(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{126:(e,t,i)=>{Promise.resolve().then(i.bind(i,3085))},3085:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var s=i(6658),n=i(9242),r=i(8209),a=i(1999),l=i.n(a);function u(e){let{orderId:t}=e,i=(0,n.useRef)(null);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{ref:i,method:"post",action:"https://map.ezship.com.tw/ezship_map_web.jsp",children:[(0,s.jsx)("input",{type:"hidden",name:"suID",value:"cocoramn@gmail.com"}),(0,s.jsx)("input",{type:"hidden",name:"processID",value:t}),(0,s.jsx)("input",{type:"hidden",name:"rtURL",value:"https://carolhyl.github.io/kokikoichi/ezship/store-select-result/"}),(0,s.jsx)("input",{type:"hidden",name:"webPara",value:"from_checkout"}),(0,s.jsx)("input",{type:"hidden",name:"stCate",value:""}),(0,s.jsx)("input",{type:"hidden",name:"stCode",value:""})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=i.current)||e.submit()},children:"\uD83D\uDDFA️ 選擇超商門市"})]})}function d(){let{cart:e}=(0,r._)(),[t,i]=(0,n.useState)(null),a=e.reduce((e,t)=>e+t.price*t.quantity,0),d="ORDER_"+Date.now();return(0,n.useEffect)(()=>{let e=localStorage.getItem("ezship_store");e&&i(JSON.parse(e))},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"結帳頁面"}),0===e.length?(0,s.jsx)("p",{children:"購物車是空的"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{children:e.map((e,t)=>(0,s.jsxs)("li",{children:[e.name," x ",e.quantity," = $",(e.price*e.quantity).toFixed(2)]},t))}),(0,s.jsxs)("h2",{children:["總金額：$",a.toFixed(2)]}),(0,s.jsx)(u,{orderId:d,user:{name:"王小明",email:"test@ezship.com.tw",mobile:"0912345678"}}),t&&(0,s.jsxs)("div",{style:{marginTop:"1rem",border:"1px solid #ccc",padding:"1rem"},children:[(0,s.jsx)("h3",{children:"✅ 已選門市"}),(0,s.jsxs)("p",{children:["\uD83C\uDFEA ",t.st_name]}),(0,s.jsxs)("p",{children:["\uD83D\uDCCD ",t.st_addr]}),(0,s.jsxs)("p",{children:["\uD83D\uDCE6 門市代碼：",t.st_code]}),(0,s.jsxs)("p",{children:["☎️ ",t.st_tel]})]}),(0,s.jsx)("button",{onClick:()=>alert("模擬付款流程"),children:"\uD83D\uDCB3 前往付款"})]}),(0,s.jsx)(l(),{href:"/",children:"\uD83D\uDD19 回首頁"})]})}},8209:(e,t,i)=>{"use strict";i.d(t,{CartProvider:()=>a,_:()=>l});var s=i(6658),n=i(9242);let r=(0,n.createContext)();function a(e){let{children:t}=e,[i,a]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=localStorage.getItem("cart");e&&a(JSON.parse(e))},[]),(0,n.useEffect)(()=>{console.log("\uD83E\uDDFA 購物車更新:",i),localStorage.setItem("cart",JSON.stringify(i))},[i]),(0,s.jsx)(r.Provider,{value:{cart:i,addToCart:e=>{a(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:e=>{a(t=>t.filter(t=>t.id!==e))},increaseQty:e=>{a(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t))},decreaseQty:e=>{a(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity-1}:t).filter(e=>e.quantity>0))},clearCart:()=>a([])},children:t})}let l=()=>(0,n.useContext)(r)}},e=>{var t=t=>e(e.s=t);e.O(0,[999,773,261,358],()=>t(126)),_N_E=e.O()}]);